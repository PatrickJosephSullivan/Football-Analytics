var TiktokAds_RS=function(t){"use strict";const e=[{destKey:"event_id",sourceKeys:["properties.eventId","properties.event_id","messageId"]},{destKey:"test_event_code",sourceKeys:"testEventCode"},{destKey:"contents",sourceKeys:"properties.contents"},{destKey:"content_category",sourceKeys:"properties.category"},{destKey:"status",sourceKeys:"properties.status"},{destKey:"content_name",sourceKeys:"properties.name"},{destKey:"content_id",sourceKeys:["properties.product_id","properties.productId"]},{destKey:"content_type",sourceKeys:["properties.contentType","properties.content_type"]},{destKey:"currency",sourceKeys:"properties.currency"},{destKey:"value",sourceKeys:"properties.value"},{destKey:"description",sourceKeys:"properties.description"},{destKey:"email",sourceKeys:["context.traits.email","traits.email","properties.email"]},{destKey:"phone",sourceKeys:["context.traits.phone","traits.phone","properties.phone"]}],r={"product added to wishlist":"AddToWishlist","product added":"AddToCart","checkout started":"InitiateCheckout","payment info entered":"AddPaymentInfo","checkout step completed":"CompletePayment","order completed":"PlaceAnOrder",viewcontent:"ViewContent",clickbutton:"ClickButton",search:"Search",contact:"Contact",download:"Download",submitform:"SubmitForm",completeregistration:"CompleteRegistration",subscribe:"Subscribe"},n={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}};const o=t=>!(t=>void 0===t)(t);function i(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function s(t){return function e(r){return 0===arguments.length||i(r)?e:t.apply(this,arguments)}}function a(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return i(r)?e:s((function(e){return t(r,e)}));default:return i(r)&&i(n)?e:i(r)?s((function(e){return t(e,n)})):i(n)?s((function(e){return t(r,e)})):t(r,n)}}}const c=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function u(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function l(t,e,r){for(var n=0,o=r.length;n<o;){if(t(e,r[n]))return!0;n+=1}return!1}function f(t,e){return Object.prototype.hasOwnProperty.call(e,t)}const p="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};var y=Object.prototype.toString,d=function(){return"[object Arguments]"===y.call(arguments)?function(t){return"[object Arguments]"===y.call(t)}:function(t){return f("callee",t)}}(),g=!{toString:null}.propertyIsEnumerable("toString"),v=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],m=function(){return arguments.propertyIsEnumerable("length")}(),b=function(t,e){for(var r=0;r<t.length;){if(t[r]===e)return!0;r+=1}return!1},h="function"!=typeof Object.keys||m?s((function(t){if(Object(t)!==t)return[];var e,r,n=[],o=m&&d(t);for(e in t)!f(e,t)||o&&"length"===e||(n[n.length]=e);if(g)for(r=v.length-1;r>=0;)f(e=v[r],t)&&!b(n,e)&&(n[n.length]=e),r-=1;return n})):s((function(t){return Object(t)!==t?[]:Object.keys(t)})),A=s((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function j(t,e,r,n){var o=u(t);function i(t,e){return O(t,e,r.slice(),n.slice())}return!l((function(t,e){return!l(i,e,t)}),u(e),o)}function O(t,e,r,n){if(p(t,e))return!0;var o,i,s=A(t);if(s!==A(e))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(o=t.constructor,null==(i=String(o).match(/^function (\w*)/))?"":i[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!p(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!p(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var a=r.length-1;a>=0;){if(r[a]===t)return n[a]===e;a-=1}switch(s){case"Map":return t.size===e.size&&j(t.entries(),e.entries(),r.concat([t]),n.concat([e]));case"Set":return t.size===e.size&&j(t.values(),e.values(),r.concat([t]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=h(t);if(c.length!==h(e).length)return!1;var u=r.concat([t]),l=n.concat([e]);for(a=c.length-1;a>=0;){var y=c[a];if(!f(y,e)||!O(e[y],t[y],u,l))return!1;a-=1}return!0}var w=a((function(t,e){return O(t,e,[],[])}));var S=s((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():c(t)?[]:function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)?"":function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)?{}:d(t)?function(){return arguments}():function(t){var e=Object.prototype.toString.call(t);return"[object Uint8ClampedArray]"===e||"[object Int8Array]"===e||"[object Uint8Array]"===e||"[object Int16Array]"===e||"[object Uint16Array]"===e||"[object Int32Array]"===e||"[object Uint32Array]"===e||"[object Float32Array]"===e||"[object Float64Array]"===e||"[object BigInt64Array]"===e||"[object BigUint64Array]"===e}(t)?t.constructor.from(""):void 0})),k=s((function(t){return null!=t&&w(t,S(t))})),_=a((function(t,e){var r={};for(var n in e)t(e[n],n,e)&&(r[n]=e[n]);return r}));const E=t=>o(t)&&(t=>null!=t)(t),K=t=>_(E,t),I=(t,e="from",r="to",n=!0)=>{const o={};return Array.isArray(t)&&t.forEach((t=>{if(!("object"==typeof(i=t[e])||"string"==typeof i?!k(i):k(i)))return;var i;if("string"!=typeof t[e])return;const s=n?t[e].toLowerCase().trim():t[e].trim();if(o[s]){o[s].includes(t[r])||o[s].push(t[r])}else o[s]=[t[r]]})),o};function C(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function D(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P,x,R,B;var L=function(){if(B)return R;B=1;const t=x?P:(x=1,P=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)});function e(t,e,r){return"function"==typeof r.join?r.join(t):t[0]+e+t[1]}function r(t,e,r){return"function"!=typeof r.isValid||r.isValid(t,e)}function n(e){return t(e)||Array.isArray(e)||"function"==typeof e}return R=function(o,i,s){if(t(s)||(s={default:s}),!n(o))return void 0!==s.default?s.default:o;"number"==typeof i&&(i=String(i));const a=Array.isArray(i),c="string"==typeof i,u=s.separator||".",l=s.joinChar||("string"==typeof u?u:".");if(!c&&!a)return o;if(c&&i in o)return r(i,o,s)?o[i]:s.default;let f=a?i:function(t,e,r){if("function"==typeof r.split)return r.split(t);return t.split(e)}(i,u,s),p=f.length,y=0;do{let t=f[y];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=e([t.slice(0,-1),f[++y]||""],l,s);if(t in o){if(!r(t,o,s))return s.default;o=o[t]}else{let n=!1,i=y+1;for(;i<p;)if(t=e([t,f[i++]],l,s),n=t in o){if(!r(t,o,s))return s.default;o=o[t],y=i-1;break}if(!n)return s.default}}while(++y<p&&n(o));return y===p?o:s.default},R}();const U=D(L);for(var N=256;N--;)(N+256).toString(16).substring(1);for(var F=0;F<256;F++)(F+256).toString(16).substring(1);const M=t=>o(t)&&(t=>null!==t)(t),V=({message:t,operationObject:e})=>{const{operation:r,args:n}=e,o=n.map((e=>{const{sourceKeys:r,defaultVal:n}=e,o=U(t,r);return o||!1===o||0===o?o:n}));if(!o.every((t=>M(t))))return null;let i=null;switch(r){case"multiplication":i=1;for(const t of o){if("number"!=typeof t)return null;i*=t}return i.toFixed(2);case"addition":i=0;for(const t of o){if("number"!=typeof t)return null;i+=t}return i.toFixed(2);default:return null}},$=(t,e)=>{let r=t;const n={jsonStringify:()=>{r=JSON.stringify(t)},jsonStringifyOnObject:()=>{"string"!=typeof t&&(r=JSON.stringify(t))},toString:()=>{r=String(t)},toNumber:()=>{r=Number(t)},toFloat:()=>{r=parseFloat(t)},toInt:()=>{r=parseInt(t,10)},toLower:()=>{r=t.toString().toLowerCase()},trim:()=>{"string"==typeof t&&(r=t.trim())},IsBoolean:()=>{r=!0,"boolean"!=typeof t&&(r=!1)}};if(e in n){(0,n[e])()}return r},z=(t,e)=>{const r={};return Array.isArray(e)&&e.length>0&&e.forEach((e=>{const{sourceKeys:n,destKey:o,metadata:i}=e,s=((t,e)=>{if(!e)return t;const{type:r,defaultValue:n}=e;if(!M(t))return n||t;let o=t;return r&&(Array.isArray(r)?r.forEach((t=>{o=$(o,t)})):o=$(o,r)),o})(((t,e)=>{if(Array.isArray(e)&&e.length>0){for(const r of e){let e;if(e="object"==typeof r?V({message:t,operationObject:r}):U(t,r),e||!1===e||0===e)return e}return null}return"object"==typeof e?V({message:t,operationObject:e}):U(t,e)})(t,n),i);(s||0===s||!1===s)&&o&&(r[o]=s)})),r},G=t=>{let e=[];const{properties:r}=t,{products:n,content_type:o,contentType:i}=r;return Array.isArray(n)&&(e=n.map((t=>{const e={content_type:t.contentType||i||t.content_type||o||"product",content_id:t.product_id,content_category:t.category,content_name:t.name,price:t.price,quantity:t.quantity,description:t.description};return K(e)}))),e},J=t=>{var r,n,o,i;let s=z(t,e);var a,c;(null!==(r=s)&&void 0!==r&&r.contents&&!Array.isArray(s.contents)&&(s.contents=[s.contents]),!s||null!==(n=s)&&void 0!==n&&n.contents||null===(o=t.properties)||void 0===o||!o.products||(s=T(T({},s),{},{contents:G(t)})),null!==(i=s)&&void 0!==i&&i.contents)&&(s.contents=((t,e)=>{let r=t;return Array.isArray(t)&&(r=t.map((t=>{const r=T({},t);return t.content_type||(r.content_type=e||"product_group"),r}))),r})(null===(a=s)||void 0===a?void 0:a.contents,null===(c=t.properties)||void 0===c?void 0:c.contentType));return K(T(T({},s),{},{partner_name:"RudderStack"}))};const W=new class{constructor(t,e){this.level=+e||n.ERROR.value,this.scope=t||""}setLogLevel(t){if(t&&"string"==typeof t){const e=t.toUpperCase();this.level=n[e]?n[e].value:this.level}}setScope(t){this.scope=t||this.scope}log(...t){this.logBase(t,n.LOG.value)}info(...t){this.logBase(t,n.INFO.value)}debug(...t){this.logBase(t,n.DEBUG.value)}warn(...t){this.logBase(t,n.WARN.value)}error(...t){this.logBase(t,n.ERROR.value)}logBase(t,e){if(this.level<=e){Object.values(n).find((t=>t.value===e)).method(...this.getLogData(t))}}getLogData(t){if(Array.isArray(t)&&t.length>0){let e="%c RS SDK";this.scope&&(e=`${e} - ${this.scope}`);e=`${e} %c ${t[0].trim()}`;const r=[];return r.push(e),r.push("font-weight: bold; background: black; color: white;"),r.push("font-weight: normal;"),r.push(...t.slice(1)),r}return t}}("TikTok Ads");return t.TiktokAds=class{constructor(t,e,r){e.logLevel&&W.setLogLevel(e.logLevel),this.name="TIKTOK_ADS",this.analytics=e,this.eventsToStandard=t.eventsToStandard,this.pixelCode=t.pixelCode,this.sendCustomEvents=t.sendCustomEvents,({shouldApplyDeviceModeTransformation:this.shouldApplyDeviceModeTransformation,propagateEventsUntransformedOnError:this.propagateEventsUntransformedOnError,destinationId:this.destinationId}=null!=r?r:{})}init(){var t;t=this.pixelCode,function(t,e,r){t.TiktokAnalyticsObject=r;var n=t[r]=t[r]||[];n.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],n.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var o=0;o<n.methods.length;o++)n.setAndDefer(n,n.methods[o]);n.instance=function(t){for(var e=n._i[t]||[],r=0;r<n.methods.length;r++)n.setAndDefer(e,n.methods[r]);return e},n.load=function(t,e){var o="https://analytics.tiktok.com/i18n/pixel/events.js";n._i=n._i||{},n._i[t]=[],n._i[t]._u=o,n._t=n._t||{},n._t[t]=+new Date,n._o=n._o||{},n._o[t]=e||{};var i=document.createElement("script");i.setAttribute("data-loader","RS_JS_SDK"),i.type="text/javascript",i.async=!0,i.src=o+"?sdkid="+t+"&lib="+r;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s)}}(window,document,"ttq"),ttq.load(t)}isLoaded(){return!!window.ttq}isReady(){return this.isLoaded()}identify(t){const{message:e}=t,{traits:r}=e.context,{email:n,phone:o,number:i}=r,s={};if(E(n)&&(s.email=n),(E(o)||E(i))&&(s.phone=o||i),Object.keys(s).length>0){const t=function(t,e){let r=null,n=null;return t.context&&t.context.externalId&&(r=t.context.externalId),r&&Array.isArray(r)&&r.forEach((t=>{t.type===e&&(n=t.id)})),n}(e,"tiktokExternalId");E(t)?window.ttq.identify(t,s):window.ttq.identify(s)}}track(t){var e;const{message:n}=t;let o=null==n?void 0:n.event;if(!o)return void W.error("Event name is required");o=null===(e=o)||void 0===e?void 0:e.toLowerCase().trim();const i=I(this.eventsToStandard);if(!this.sendCustomEvents&&void 0===r[o]&&!i[o])return void W.error(`Event name (${o}) is not valid, must be mapped to one of standard events`);if(i[o])return void Object.keys(i).forEach((t=>{t===o&&i[o].forEach((t=>{const e=J(n);window.ttq.track(t,e)}))}));o=r[o]||n.event;const s=J(n);window.ttq.track(o,s)}page(t){window.ttq.page()}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({});
//# sourceMappingURL=TiktokAds.min.js.map
